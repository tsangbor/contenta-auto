!function(e){UAELRegistrationForm={_checkPasswordStrength:function(e){var a=e.find("input[type=password]").val(),t=e.find(".uael-pass-wrapper"),r=e.find(".uael-pass-notice");switch(t.css("display","block"),uaelRegistration.wp_version?wp.passwordStrength.meter(a,wp.passwordStrength.userInputDisallowedList(),a):wp.passwordStrength.meter(a,wp.passwordStrength.userInputBlacklist(),a)){case-1:break;case 2:r.html(pwsL10n.bad).css("color","#e07757");break;case 3:r.html(pwsL10n.good).css("color","#f0ad4e");break;case 4:r.html(pwsL10n.strong).css("color","#5cb85c");break;case 5:r.html(pwsL10n.mismatch).css("color","#f0ad4e");break;default:r.html(pwsL10n.short).css("color","#d9534f")}},_printErrorMessages:function(e,a,t){a.next().hasClass("uael-register-field-message")||a.after('<span class="uael-register-field-message"><span class="uael-register-error">'+t+"</span></span>")},_submitForm:function(a,t,r){var s=uaelRegistration.ajax_url,i=!1,n=/\S+@\S+\.\S+/,o=/^[0-9.()\[\]+-]*$/,d=!1,l=r.find(".uael-registration-form"),c=l.attr("data-redirect-url"),u=a.find(".uael-registration-submit"),f=l.find(".form-field-password"),g=l.find(".uael-input-fields"),p=!0,m={},h=r.find(".uael-g-recaptcha-field"),v=r.find("input[name=uae-terms-checkbox]"),w=r.find(".elementor-field-subgroup");if(r.find(".acceptance-field").length>0&&(v.is(":checked")||(i=!0,w.next().show()),r.find(".elementor-acceptance-field").on("click",function(){r.find(".uael-register-acceptance-message").hide()})),m.page_id=t.data("page-id"),m.widget_id=r.data("id"),h.length>0&&(m.is_recaptcha_enabled="yes",m.recaptcha_token=l.find(".uael-g-recaptcha-response").val()),g.each(function(a){var t=e(this),s=t.find(".elementor-field"),l=s.attr("name"),c=t.hasClass("elementor-field-required"),u=s.val();s.length>0&&""!==u?("email"===l&&(u=e.trim(u),n.test(u)?s.siblings(".uael-register-field-message").hide():(i=!0,UAELRegistrationForm._printErrorMessages(r,s,uaelRegistration.invalid_mail))),"phone"===l&&(/\s/.test(u)?(i=!0,UAELRegistrationForm._printErrorMessages(r,s,uaelRegistration.error_phone)):o.test(u)?s.siblings(".uael-register-field-message").hide():(i=!0,UAELRegistrationForm._printErrorMessages(r,s,uaelRegistration.invalid_phone))),"password"===d&&(d=!0),"confirm_pass"===l?f.val()!==s.val()&&(i=!0,UAELRegistrationForm._printErrorMessages(r,s,uaelRegistration.pass_unmatch)):""!==u&&""!==l&&(m[l]=u)):s.length>0&&c&&(i=!0,UAELRegistrationForm._printErrorMessages(r,s,uaelRegistration.required)),s.hasClass("uael-regform-set-field")&&""!==u&&(p=!1,r.find(".uael-registration-message").addClass("error").text("Invalid Form!")),m[l]=u}),p){m.auto_login=l.attr("data-auto_login"),m.send_email=l.attr("data-send_email"),m.send_email_password=0==d?"yes":"no";var _=r.find("input#uael-reg-form-nonce").val();if(r.find(".uael-registration-message").text("").removeClass("success error"),i)return!1;e.post(s,{action:"uael_register_user",data:m,nonce:_,method:"post",dataType:"json",beforeSend:function(){l.animate({opacity:"0.45"},500).addClass("uael-form-waiting"),u.hasClass("disabled")||i||(u.addClass("disabled"),u.append('<span class="uael-form-loader"></span>')),f.siblings(".uael-pass-wrapper").remove()}},function(e){h.length>0&&(recaptcha_id=h.attr("data-widgetid"),grecaptcha.reset(recaptcha_id),grecaptcha.execute(recaptcha_id)),!0===e.success?("yes"!==m.auto_login||void 0!==c&&""!==c?void 0!==c&&""!==c&&window.setTimeout(function(){window.location=c}):location.reload(),"yes"===l.attr("data-hide_form")?l.find(".elementor-form").remove():(u.find(".uael-form-loader").remove(),u.removeClass("disabled"),r.find(".uael-register-field-message").remove(),r.find(".elementor-form").trigger("reset")),l.animate({opacity:"1"},100).removeClass("uael-form-waiting"),"yes"!==l.attr("data-hide_form")&&($success_text=t.data("success-message"),r.find(".uael-registration-message").removeClass("error").addClass("success").text($success_text))):(l.animate({opacity:"1"},100).removeClass("uael-form-waiting"),u.find(".uael-form-loader").remove(),u.removeClass("disabled"),r.find(".uael-register-field-message").remove(),jQuery.each(e.error,function(e,a){var t=r.find(".form-field-"+e);UAELRegistrationForm._printErrorMessages(r,t,a)}),void 0===e.error&&($error_text=t.data("error-message"),r.find(".uael-registration-message").removeClass("success").addClass("error").text($error_text)))})}}},window.onLoadUAEReCaptcha=function(){var a,t=e(".uael-g-recaptcha-field");t.length>0&&t.each(function(){var t=e(this),r=t.attr("data-widgetid");void 0!==r&&!1!==r||(a=grecaptcha.render(e(this).attr("id"),{sitekey:t.data("sitekey"),callback:function(e){""!=e&&t.append(jQuery("<input>",{type:"hidden",value:e,class:"uael-g-recaptcha-response"}))}}),t.attr("data-widgetid",a))})};var a=function(e,a){if(void 0!==e){e.data("id");var t=e.find(".uael-register-submit"),r=e.find("input[type=password]"),s=e.find(".uael-registration-form");s.find(".elementor-form");if("yes"==s.data("strength-check")&&r.on("keyup",function(a){UAELRegistrationForm._checkPasswordStrength(e)}),r.on("focusout",function(a){""===e.find("input[type=password]").val()&&e.find(".uael-pass-wrapper").css("display","none")}),e.find(".elementor-field").on("keyup",function(e){a(this).siblings(".uael-register-field-message").remove()}),e.find(".uael-recaptcha-alert").length>0)t.addClass("uael-submit-disabled");else{var i=e.find(".uael-g-recaptcha-field");t.removeClass("uael-submit-disabled"),elementorFrontend.isEditMode()&&void 0==i.attr("data-widgetid")&&onLoadUAEReCaptcha(),i.length>0&&grecaptcha.ready(function(){recaptcha_id=i.attr("data-widgetid"),grecaptcha.execute(recaptcha_id)})}t.on("click",function(){event.preventDefault();var t=a(this);UAELRegistrationForm._submitForm(t,s,e)})}};e(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/uael-registration-form.default",a)})}(jQuery);