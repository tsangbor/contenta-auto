# OpenAI Batch API æˆæœ¬æ•ˆç›Šåˆ†æ

## ğŸ¯ Batch API å„ªå‹¢
- **æˆæœ¬æŠ˜æ‰£**: 50% æŠ˜æ‰£
- **è™•ç†æ™‚é–“**: 24å°æ™‚å…§å®Œæˆ
- **é©ç”¨å ´æ™¯**: éå³æ™‚ã€æ‰¹é‡è™•ç†ä»»å‹™

## ğŸ“Š å„æ­¥é©Ÿ Batch API é©ç”¨æ€§åˆ†æ

### âœ… é«˜åº¦é©åˆ Batch API

#### 1. æ­¥é©Ÿ09 - æ–‡ç« å…§å®¹ç”Ÿæˆ
**åŸå› **: 
- 6-9ç¯‡æ–‡ç« å¯æ‰¹é‡ç”Ÿæˆ
- éå³æ™‚éœ€æ±‚ï¼Œå¯å»¶é²è™•ç†
- Token ä½¿ç”¨é‡å¤§ï¼ŒæŠ˜æ‰£æ•ˆç›Šæ˜é¡¯

**æˆæœ¬æ¯”è¼ƒ**:
```
å³æ™‚ API: 6ç¯‡ Ã— (2K+2K) tokens Ã— $0.75/1M = $0.018
Batch API: åŒä¸Š Ã— 50% = $0.009 (ç¯€çœ $0.009)
```

**å¯¦æ–½å»ºè­°**: â­â­â­â­â­ å¼·çƒˆæ¨è–¦

#### 2. æ­¥é©Ÿ10 - åœ–ç‰‡æè¿°å„ªåŒ–
**åŸå› **:
- 13å¼µåœ–ç‰‡æè¿°å¯æ‰¹é‡è™•ç†
- æ–‡å­—å„ªåŒ–éå³æ™‚éœ€æ±‚
- å¯èˆ‡æ–‡ç« ç”Ÿæˆåˆä½µæ‰¹æ¬¡

**æˆæœ¬æ¯”è¼ƒ**:
```
å³æ™‚ API: 13å€‹æè¿° Ã— 200 tokens Ã— $0.60/1M = $0.0016
Batch API: åŒä¸Š Ã— 50% = $0.0008 (ç¯€çœ $0.0008)
```

**å¯¦æ–½å»ºè­°**: â­â­â­â­ æ¨è–¦

### âš ï¸ æ¢ä»¶é©åˆ Batch API

#### 3. æ­¥é©Ÿ08 - é…ç½®æ–‡ä»¶ç”Ÿæˆ
**åŸå› **:
- å–®æ¬¡å¤§é‡ token ç”Ÿæˆ
- å¦‚æœèƒ½æ¥å—å»¶é²ï¼Œæ•ˆç›Šä¸éŒ¯

**é™åˆ¶**:
- ç”¨æˆ¶å¯èƒ½æœŸæœ›å³æ™‚çœ‹åˆ°é…ç½®
- å½±éŸ¿å¾ŒçºŒæ­¥é©Ÿæ™‚åº

**æˆæœ¬æ¯”è¼ƒ**:
```
å³æ™‚ API: (5K+8K) tokens Ã— $0.45/1M = $0.0059
Batch API: åŒä¸Š Ã— 50% = $0.0029 (ç¯€çœ $0.003)
```

**å¯¦æ–½å»ºè­°**: â­â­â­ å¯é¸æ¨è–¦

### âŒ ä¸é©åˆ Batch API

#### 4. åœ–ç‰‡ç”Ÿæˆ (DALL-E)
**åŸå› **: åœ–ç‰‡ç”Ÿæˆ API ä¸æ”¯æ´ Batch æ¨¡å¼

#### 5. è¦–è¦ºåé¥‹åˆ†æ
**åŸå› **: éœ€è¦å³æ™‚äº¤äº’ï¼Œå»¶é²æœƒå½±éŸ¿ç”¨æˆ¶é«”é©—

## ğŸš€ å¯¦æ–½ç­–ç•¥

### 1. æ··åˆæ¨¡å¼ç­–ç•¥
```json
{
  "step08_config": "å³æ™‚ API",      // ç”¨æˆ¶éœ€è¦å³æ™‚ç¢ºèª
  "step09_articles": "Batch API",  // ğŸ† æœ€å¤§æ•ˆç›Š
  "step10_images": "å³æ™‚ API",      // ä¸æ”¯æ´ Batch
  "step10_descriptions": "Batch API" // å¯èˆ‡æ–‡ç« åˆä½µ
}
```

### 2. æ™ºèƒ½æ‰¹æ¬¡åˆä½µ
```json
{
  "batch_job_1": [
    "6ç¯‡æ–‡ç« ç”Ÿæˆ",
    "13å€‹åœ–ç‰‡æè¿°å„ªåŒ–",
    "SEO meta æ¨™ç±¤ç”Ÿæˆ"
  ],
  "estimated_savings": "60%",
  "processing_time": "2-6å°æ™‚"
}
```

## ğŸ’° æˆæœ¬æ•ˆç›Šè¨ˆç®—

### å–®ç«™éƒ¨ç½²æˆæœ¬æ¯”è¼ƒ

#### ä½¿ç”¨ Batch API å„ªåŒ– (æ¨è–¦)
```
æ­¥é©Ÿ08 (å³æ™‚): $0.0059
æ­¥é©Ÿ09 (Batch): $0.009  (åŸ $0.018)
æ­¥é©Ÿ10åœ–ç‰‡ (å³æ™‚): $0.52
æ­¥é©Ÿ10æè¿° (Batch): $0.0008 (åŸ $0.0016)

ç¸½æˆæœ¬: $0.536 USD
ç¯€çœ: $0.012 USD (2.2%)
```

#### å…¨ Batch API (å¦‚æœå¯æ¥å—å»¶é²)
```
æ­¥é©Ÿ08 (Batch): $0.0029 (åŸ $0.0059)
æ­¥é©Ÿ09 (Batch): $0.009  (åŸ $0.018)
æ­¥é©Ÿ10æè¿° (Batch): $0.0008 (åŸ $0.0016)

ç¸½ç¯€çœ: $0.015 USD (2.8%)
å¹´åº¦100ç«™: ç¯€çœ $1.50 USD
```

## ğŸ”§ æŠ€è¡“å¯¦æ–½

### 1. Batch API è«‹æ±‚æ ¼å¼
```json
{
  "custom_id": "article-generation-job-001",
  "method": "POST",
  "url": "/v1/chat/completions",
  "body": {
    "model": "gpt-4o-mini",
    "messages": [{"role": "user", "content": "..."}],
    "max_tokens": 2000
  }
}
```

### 2. æ‰¹æ¬¡ä»»å‹™ç®¡ç†
```php
// å‰µå»ºæ‰¹æ¬¡ä»»å‹™
$batch_jobs = [
    ['type' => 'article', 'data' => $article_prompts],
    ['type' => 'image_desc', 'data' => $image_descriptions]
];

$batch_id = create_openai_batch($batch_jobs);
```

### 3. ç‹€æ…‹æª¢æŸ¥èˆ‡å›èª¿
```php
// æª¢æŸ¥æ‰¹æ¬¡ç‹€æ…‹
$status = check_batch_status($batch_id);

if ($status === 'completed') {
    $results = retrieve_batch_results($batch_id);
    process_batch_results($results);
}
```

## ğŸ“‹ å¯¦æ–½å»ºè­°

### ç«‹å³å¯¦æ–½ (é«˜æ•ˆç›Š)
1. âœ… æ­¥é©Ÿ09æ–‡ç« ç”Ÿæˆæ”¹ç”¨ Batch API
2. âœ… åœ–ç‰‡æè¿°å„ªåŒ–åˆä½µåˆ°æ‰¹æ¬¡
3. âœ… è¨­å®šæ‰¹æ¬¡ç‹€æ…‹ç›£æ§

### é€²éšå¯¦æ–½ (å¯é¸)
1. ğŸ”„ æ­¥é©Ÿ08é…ç½®ç”Ÿæˆ Batch é¸é …
2. ğŸ”„ ç”¨æˆ¶åå¥½è¨­å®šï¼šé€Ÿåº¦ vs æˆæœ¬
3. ğŸ”„ æ··åˆè™•ç†æ¨¡å¼åˆ‡æ›

### é…ç½®ç¯„ä¾‹
```json
{
  "batch_strategy": {
    "articles": "always_batch",
    "config": "user_choice", 
    "images": "never_batch",
    "max_wait_time": "6_hours"
  }
}
```

## ğŸ¯ çµè«–

**æœ€ä½³å¯¦æ–½æ–¹æ¡ˆ**:
- æ­¥é©Ÿ09æ–‡ç« ç”Ÿæˆä½¿ç”¨ Batch API (ç¯€çœ50%)
- ä¿æŒå…¶ä»–æ­¥é©Ÿå³æ™‚è™•ç†
- é ä¼°é¡å¤–ç¯€çœ 2-3% ç¸½æˆæœ¬
- å¹´åº¦è¦æ¨¡åŒ–æ•ˆç›Šå¯è§€

é›–ç„¶å–®æ¬¡ç¯€çœä¸å¤§ï¼Œä½†åœ¨å¤§è¦æ¨¡éƒ¨ç½²æ™‚ç´¯ç©æ•ˆç›Šé¡¯è‘—ï¼